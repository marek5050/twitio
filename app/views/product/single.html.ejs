 
  <div class="container">
    <div class="row">

      <div class="col-xs-12">
        <a href="index.html">Home</a> > <a href="collection.html">Swimwear</a> > <a href="collection.html">Bikinis</a> > BeachFront Frog 
      </div> <!-- //end span12 -->

    </div> <!-- //end row -->
  </div> <!-- //end container -->
  
  <div class="container product-main">
    <div class="row">
      <div class="col-sm-6" >
        <div class="content" >
        
          <!-- Product information for small screens -->
          <div class="product-details-small">
            <!-- Product name and manufacturer -->
            <h1 data-bind='text:name'></h1>
            <small>by  <span data-bind='text:reebok().Merchant' ></span></small>
           <!-- Pricing and offer info -->
 <div class="pricing_info" data-bind='foreach: buy'> 
  <div class="pricing clearfix">
      <a class="btn btn-bottom btn-atc" data-bind="attr: {href: buylink}" target = "_blank">
       Buy at <span class="" data-bind="text: vendor"></span> 
       <span class='total' data-bind="text:price"></span>
     </a>      
  </div>          
</div>
          </div>
        
          <div class="">
            <img id="hmm"  alt="" class="main-img img-responsive" data-bind="attr: {src: mainImage}" height="500px" /></a>
         </div>

          <ul class="alternate-images clearfix" data-bind="foreach: images">
             <li><a data-bind="click: $parent.switchImage" ><img alt="mini" data-bind="attr: {src: ThumbnailImage.URL, height: ThumbnailImage.Height['#']}" /></a></li>
          </ul>
        </div>
      </div> <!-- // end span6 -->

      <div class="col-sm-6">
        <div class="content">
          
          <!-- Product information for large screens -->
          <div class="product-details-large">
            <!-- Product name and manufacturer -->
            <h1 data-bind='text:reebok().Name'></h1>
            <small>by <span data-bind='text:reebok().Merchant' ></span></small>

           <!-- Product description etc -->
           <div  class='pricing clearfix'>
            <ul data-bind='foreach: features'> 
              <li data-bind="text: $data"> </li>
              
            </ul>
            <p id="description" data-bind='text: description'> </p>
          </div>

          </div>
          

            <!-- Pricing and offer info -->
 <div class="pricing_info" data-bind='foreach: buy'> 
  <div class="pricing clearfix">
      <a class="btn btn-bottom btn-atc" data-bind="attr: {href: buylink}" target = "_blank">
       Buy at <span class="" data-bind="text: vendor"></span> 
       <span class='total' data-bind="text:price"></span>
     </a>      
  </div>          
</div>
          <!-- Share -->
          <ul class="share">
            <li>
              <a href="https://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a>
            </li>
            <li>
              <div class="g-plusone" data-size="medium" data-annotation="none"></div>
            </li>
            <li>
              <a href="http://pinterest.com/pin/create/button/?url=PAGEURL&media=IMAGE&description=DESCRIPTION" data-pin-do="buttonPin" data-pin-config="beside"><img src="http://assets.pinterest.com/images/pidgets/pin_it_button.png" alt=""/></a>
            </li>
            <li>
              <div class="fb-like" data-href="PAGEURL" data-send="false" data-width="120" data-show-faces="false" data-layout="button_count"></div>
            </li>
          </ul>
          
          
        </div>
      </div> <!-- // end span6 -->
      
    </div> <!-- //end row -->

    <div class="row" id="reviews">
      <div class="col-xs-12">
        <div class="review-overview">
          <div class="content clearfix">
           
    <!-- Review average -->
      <div class="product-review" data-bind="if: amazon">
       <iframe data-bind="attr: { src:reviews, width:'100%', height:'400px'}"></iframe>
    </div>
  </div> <!-- //end span12 -->
 </div> <!-- //end row -->   
    
    <div class="row">
      <div class="col-xs-12">
        <div class="content clearfix">
          <h3>Related products</h3>
          <div data-bind="foreach: related">
          <div class="product medium">
   <div class="media">
    <a class='current' title="product title"  data-bind="attr: {href: '/product/'+UPC}">
      <img  data-bind="attr: {src: BigImage}" height= '160'/>
    </a>
    <span class="plabel">just in</span>       
  </div>
  <div class="details">
    <p class="name"><a class='current' href="product.html" data-bind="text: Name, attr: {href: '/product/'+ UPC}"></a></p>
    <p class="price" >$ <span data-bind="text:Price"> </span></p>
  </div>
</div>
 </div>
 <div data-bind="foreach: amazonRelated">
  <div class="product medium">
   <div class="media">
    <a class='current' title="product title"  data-bind="attr: {href: '/product/a/'+ASIN}">
      <img class="" data-bind="attr: {src: MediumImage.URL} "/>
    </a>
<!--     attr: (typeof ImageSets.ImageSet=='array')? {src:  ImageSets.ImageSet[0].MediumImage.URL, height: ImageSets.ImageSet[0].MediumImage.Height['#'] }:{src:  ImageSets.ImageSet.MediumImage.URL, height: ImageSets.ImageSet.MediumImage.Height['#'] }  -->
    <span class="plabel">just in</span>       
  </div>
  <div class="details">
    <p class="name"><a class='current' href="product.html" data-bind="text: ItemAttributes.Title, attr: {href: '/product/a/'+ASIN}"></a></p>
    <p class="price" ><span data-bind="text:ItemAttributes.ListPrice.FormattedPrice"> </span></p>
  </div>
</div>
 </div>


          </div>
        </div>
      </div> <!-- //end span12 -->
    </div> <!-- //end row -->   
    
  </div> <!-- //end container -->
  </div>
  <footer>
  <div class="container">
    <div class="row">
      <div class="col-sm-6 col-md-3">
        <p>&copy; 2013 Shopfrog</p>
        <p><a href="">terms</a> / <a href="">privacy</a> / <a href="">returns</a> / <a href="">delivery</a></p>
      </div> <!-- //end span3 -->
      <div class="col-sm-6 col-md-3">
        <p>Why us?</p>
        <p><a href="about.html">about</a> / <a href="contact.html">contact</a> / <a href="">promotions</a> / <a href="">press</a></p>
      </div> <!-- //end span3 -->
      <div class="col-sm-6 col-md-3">
        <p>Social links</p>
        <p><a href="">Facebook</a> / <a href="">Twitter</a> / <a href="">Pinterest</a></p>
      </div> <!-- //end span3 -->
      <div class="col-sm-6 col-md-3">
        <p>Get exclusive offers and news</p>
        <form class="form-inline" method="post" action="newsletter-signup.php">
          <input id="newsletter-email" name="newsletter-email" type="text" placeholder="your email..." class="form-control">
          <input name="submit" type="submit" value="&rarr;" class="btn">
        </form>
      </div> <!-- //end span3 -->           
    </div>
  </div>
</footer>


<script>
/*

ASIN: "B008AZHRDA"
BrowseNodes: Object
CustomerReviews: Object
DetailPageURL: "http://www.amazon.com/Reebok-Womens-Coral-Contrast-Large/dp/B008AZHRDA%3FSubscriptionId%3DAKIAJQDHUK5TEXAPUBMA%26tag%3Dwwwquickfixau-20%26linkCode%3Dxm2%26camp%3D2025%26creative%3D165953%26creativeASIN%3DB008AZHRDA"
EditorialReviews: Object
ImageSets: Object
ItemAttributes: Object
ItemLinks: Object
LargeImage: Object
MediumImage: Object
OfferSummary: Object
Offers: Object
ParentASIN: "B00AC5V8QI"
SimilarProducts: Object
SmallImage: Object



*/
$(function(){
  $("body").addClass('product-page');
});

function AmazonModel(){
 var self = this;
self.ASIN= ko.observable()
, self.BrowseNodes= ko.observable()
, self.CustomerReviews= ko.observable()
, self.DetailPageURL= ko.observable()
, self.EditorialReviews= ko.observable()
, self.ImageSets= ko.observable()
, self.ItemAttributes= ko.observable()
, self.ItemLinks= ko.observable()
, self.LargeImage= ko.observable()
, self.MediumImage= ko.observable()
, self.OfferSummary= ko.observable()
, self.Offers= ko.observable()
, self.ParentASIN= ko.observable()
, self.SimilarProducts= ko.observable()
, self.SmallImage= ko.observable()
}

function ProductModel(){
 var self = this;
  self.Name = ko.observable()
 , self.amaazon = ko.observable()
 , self.Merchant= ko.observable()
 , self.itemLink= ko.observable()
 , self.Thumbnail= ko.observable()
 , self.BigImage= ko.observable()
 , self.Price= ko.observable()
 , self.RetailPrice= ko.observable()
 , self.Category= ko.observable() 
 , self.SubCategory= ko.observable() 
 , self.Description= ko.observable() 
 , self.Custom1= ko.observable()
 , self.Custom2= ko.observable()
 , self.Custom3= ko.observable()
 , self.Custom4= ko.observable()
 , self.Custom5= ko.observable()
 , self.LastUpdated= ko.observable()
 , self.status= ko.observable()
 , self.manufacturer= ko.observable()
 , self.partnumber= ko.observable()
 , self.merchantCategory=ko.observable() 
 , self.merchantSubcategory = ko.observable()
 , self.shortDescription=ko.observable() 
 , self.ISBN= ko.observable()
 , self.UPC= ko.observable()
 , self.SKU= ko.observable()
 , self.CrossSell= ko.observable()
 , self.MerchantGroup= ko.observable()
 , self.MerchantSubgroup= ko.observable()
 , self.CompatibleWith= ko.observable()
 , self.CompareTo= ko.observable()
 , self.QuantityDiscount= ko.observable()
 , self.Bestseller= ko.observable()
 , self.AddToCartURL=ko.observable() 
 , self.ReviewsRSSURL= ko.observable()
 , self.Option1= ko.observable()
 , self.Option2= ko.observable()
 , self.Option3= ko.observable()
 , self.Option4= ko.observable()
 , self.Option5= ko.observable()
 , self.mobileURL= ko.observable()
 , self.mobileImage= ko.observable()
 , self.mobileThumbnail= ko.observable()
 , self.spare1= ko.observable()
 , self.spare2= ko.observable()
 , self.spare3= ko.observable()
 , self.spare4= ko.observable()
 , self.spare5= ko.observable()
 , self.spare6= ko.observable()
}

function PageModel(){
  var self = this;

  self.amazon = ko.observable(0);
  self.reebok = ko.observable(0);

  self.image_idx = ko.observable(0);
  self.related=ko.observableArray(0);
  self.amazonRelated = ko.observableArray(0);

  self.name = ko.observable();

  self.images = ko.computed(function() {
    var list = [];
    console.log("Images");
    if(self.amazon()!=0)
    {
        console.log("Amazon pictures");
        $.map(self.amazon().ImageSets.ImageSet, function(item){
          console.log("Item: ", item);
        list.push(item);
      });
    }
    if(self.reebok()!=0){
      console.log("Self:Reebok:BigImage ", self.reebok().BigImage);
        list.push(self.reebok().BigImage);
    }
    if(list==[]) return null;
    return list;
  });

 self.mainImage = ko.computed(function(){
  console.log("Self:Images: ", self.images()[self.image_idx()]);
   return (typeof self.images()[self.image_idx()] == 'object')? self.images()[self.image_idx()].LargeImage.URL: null;
 })

self.buy = ko.computed(function(){
    var shops = [];
    if(self.reebok()!=0)
      shops.push({'vendor': self.reebok().Merchant, 'price':self.reebok().Price, 'buylink': self.reebok().AddToCartURL})
    if(self.amazon()!=0)
      shops.push({'vendor': "Amazon", 'price': self.amazon().OfferSummary.LowestNewPrice.FormattedPrice,'buylink': self.amazon().DetailPageURL})
    return shops ;  
})

self.features = ko.computed(function(){
    return (self.amazon()!=0)? self.amazon().ItemAttributes.Feature: null;
});

self.description = ko.computed(function(){
    var ret="";

    if(self.reebok()!=0)
      ret= self.reebok().Description; 

    if(self.amazon()!=0){
      ret += self.amazon().EditorialReviews.EditorialReview.Content;      
     }
  
    console.log("Description: ", ret);
    return ret;
})



 self.reviews = ko.computed(function(){
  if(self.amazon()!=0 && self.amazon().CustomerReviews.HasReviews == 'true'){
    return self.amazon().CustomerReviews.IFrameURL;
   }
   return null;
 })

  self.related = ko.observableArray();

  self.setName = function(name)
  {
     self.name(name);
  }

  self.addProduct = function(item)
  {
    var mod_item = item;
    // mod_item.BigImage=;
     self.product = item;
     self.selectedImage(item.BigImage);
      // self.thumbnails();
  }
  self.addRelated = function(items){
    console.log("Items: ", items);
    $.each(items,function(item){ self.related.push(items[item])});
  }

  self.switchImage = function(data){
    console.log("Data:  ", data);
    console.log("Index: " + self.images().indexOf(data));
    self.image_idx(self.images().indexOf(data));
  }

  var pageProduct = <%-JSON.stringify(product)%>;
  pageProduct.BigImage = {'LargeImage': {'URL': pageProduct.BigImage, 'Height': {'#': '500'}},
                          'ThumbnailImage': {'URL': pageProduct.BigImage, 'Height': {'#': '78'}}};
  var amazon = <%-JSON.stringify(amazon) %>;
  var relatedProducts = <%-JSON.stringify(related)%>;
  var amazonRelated = <%-JSON.stringify(amazonRelated)%>;
  // var product = pageProduct.split(',').replace('{|}','');
  self.amazon(amazon);
  self.amazonRelated(amazonRelated);
  self.reebok(pageProduct);
  self.related(relatedProducts);
  //  self.addAmazon(pageAmazon);
  //  self.add = function(user){
  //   _.map(user, function(item){self.users.push(item)});
  // }
}

ko.applyBindings(new PageModel());

</script>